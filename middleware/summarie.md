# 中间件综述

中间件（Middleware）是**处于操作系统和应用程序之间**的软件，也有人认为它应该属于操作系统中的一部分。人们在使用中间件时，往往是一组中间件集成在一起，构成一个平台(包括开发平台和运行平台)，但在这组中间件中必需要有一个通信中间件，即**中间件=平台＋通信**，这个定义也限定了**只有用于分布式系统中才能称为中间件**，同时还可以把它与支撑软件和实用软件区分开来。

中间件是基础软件，处于操作系统（或网络协议）与分布式应用之间。

分类：

- 消息中间件（MOM：Message-Oriented Middleware）
- 数据中间件（Database Middleware）<br>
http://baike.baidu.com/view/25611.htm
http://www.cnblogs.com/yangy608/archive/2010/11/09/1872823.html
http://www.openfoundry.org/en/tech-column/1325
http://it.china-b.com/zx/mssql/20090609/70440_1.html
- 远程过程调用中间件（RPC：Remote Process Call）
- 对象请求代理中间件（ORB：Object Request Broker）
- 事务处理中间件（TP Monitor：Transaction Process Monitor）
- J2EE中间件

分布式软件系统：

1. 不同的模块运行在不同的物理位置
2. 并行处理同一个请求

分布式对象，实际上是软件构件：

1. 面向对象
2. 对象之间的交互，通过消息交换。（对象方法的调用）
3. 语言的无关性
4. 可插入性强、封装的更彻底，不关注源代码的处理

分布式系统中数据交换只能是流数据（网络上进行传输的数据，串行化数据 ）。

接触到几个概念：

1. 构件：

构件是一个严格定义的可插入单元：类似于硬件模块，一旦开发完成，就可以方便的用来组装系统。构件一般是基于对象实现的，但也可以不作为对象实现；

构件将封装运用到了极限：构件通过封装来隐藏构件的实现以达到；

构件通常在容器中进行管理：按照上面的讨论，构件要屏蔽实现语言、实现方式等，很多实现细节，使用一个构件时可以不关心具体实现和位置；

构件可以从容器中获得属性或服务： 如构件可以使用容器的背景色作为自己的背景色；

构件允许对所支持的接口进行动态发现和调用： 客户程序可以在运行状态下确定一个构件支持何种功能，然后调用该功能。

![构建化软件的升级方式](http://p1.pstatp.com/large/pgc-image/73be0e4aa772429bb95b215f9e321da8)

2. 中间件概念：

- 终端仿真/屏幕转换中间件：<br>用以实现客户端图形用户接口与已有的字符接口方式的服务器应用程序的互操作。在该种中间件支持下，可以很容易地为原有字符界面的应用程序提供图形用户界面。
- 数据访问中间件：<br>在数据库管理系统的基础上，对异构环境下的数据库实现联接或文件系统实现联接的中间件，为应用程序访问数据库提供开发支撑。 远程过程/方法调用中间件：用以实现远程过程或方法调用的中间件。向应用程序提供远程调用时的底层通信支持，帮助应用程序完成编组与解组等工作，程序员方便地编写客户端应用程序，像调用本地过程或对象那样方便调用位于远端服务器上的过程或对象方法。
- 消息中间件：<br>为应用程序提供发送和接收异步消息支持的中间件。基于消息的交互方式提供了基本的异步编程模式，即客户端可以通过发送消息来请求某种服务，在服务端处理请求期间，客户端不必等待对方完成，可以执行其它操作，服务端完成后会以消息的形式通知客户端。在消息中间件的支持下，应用程序可以很容易地实现消息的发送和接收，而不必关心消息交换过程中的具体细节。
- 事务（交易）中间件：<br>提供事务控制机制的中间件。事务（交易）管理支持可靠的服务端计算，这在很多关键系统中都是必需的。事务的基本特征是维护一系列操作的原子性，如银行业务系统中转账功能所包含的扣除源账户余额与增加目标账户余额两个操作， 这两个操作从业务逻辑上讲应该是原子的，即要么全部都完成，要么全部都不做。基于事务中间件，应用程序可以佷方便地实现事务控制，而不必关心具体事务控制的细节。
- 构件中间件：<br>提供构件化支持的中间件。在分布、异构的网络计算环境中将各种分布对象有机地结合在一起，完成系统的快速集成，实现对象重用。 有了各种中间件的支撑，在应用软件中用到中间件对应的功能时，不需要开发人员自己实现，可直接利用中间件将其已实现好的功能快速集成到应用软件中。

现有的集成中间件典型地为三层/多层结构的分布式软件系统提供各种开发支撑，因为

三层结构的分布式软件的核心为中间层，因此支撑主要集中在对中间层开发的支撑上。目前

应用最广泛的集成中间件有三类：

- 基于 OMG（Object Management Group，对象管理组织）CORBA规范的集成中间件
- 基于 Sun JEE（Java Enterprise Edition，Java 企业版）规范的集成中间件
- 基于微软.NET 架构的集成中间件

3. 互操作：

广义的互操作包括中间层应用构件与数据库、客户层构件与中间层应用构件、中间层应用构件与公共服务构件、中间层应用构件之间的互操作等多个层次，本书主要关注应用构件之间的互操作，即软件系统开发人员编写的程序之间的互操作。

![互操作](http://p1.pstatp.com/large/pgc-image/df17d9d2e920453a91a386d90357bf6f)

在 Stub/Skeleton 结构的支撑下，客户程序与服务程序按照图中所示的 8 个步骤完成一次服务的调用：

①：客户程序将调用请求发送给客户端桩，对于客户程序来说，桩就是服务程序在客户端的代理。

②：客户端桩负责将远程调用请求进行编组并通过通信总线发送给服务端。

③：调用请求经通信总线传送到服务端框架。

④：服务端框架将调用请求解组并分派给真正的远程对象实现（服务程序） 。

⑤：服务程序完成客户端的调用请求，将结果返回给服务端框架。

⑥：服务端框架将调用结果编组并通过通信总线发送给客户端桩。

⑦：客户端桩将调用结果解组并返回给客户程序。

⑧：客户程序得到调用结果。

对象管理体系结构：CORBA 所基于的概念框架是对象管理体系结构（Object Management Architecture，OMA） ，OMA 描述了一个基于 CORBA 的应用系统的基本结构与构成系统的构件的特性。

![基于CORBA的应用系统](http://p3.pstatp.com/large/pgc-image/e2762cd7348f49cc9e0b4dcc8afb08ab)

对象请求代理：（Object Request Broker，ORB）是OMA的核心基础设施，CORBA规范规定了 ORB的标准体系结构。ORB 负责完成查找请求的对象实现、让对象实现准备好接收请求、传递构成请求的数据等完成远程调用时底层通信任务所需的全部机制。

![ORA体系结构](http://p1.pstatp.com/large/pgc-image/3c42cd544c514b0281d65ebbde9450a5)

CORBA互操作

CORBA 的目标是支持多个层次的可互操作性，CORBA 规范经过多次改进与发展才达到这一目标。CORBA支持在可互操作性主要包括如下几个层次：

（1）不同平台（如操作系统）与语言之间的可互操作性：这是早期的 CORBA 版本强调解决的主要问题， 解决方法包括制定IDL标准以及IDL到程序设计语言的映射。

这使得使用同一供应商的 ORB 产品开发的客户程序与服务程序之间可以交互， 但使用不同供应商的 ORB产品开发的客户程序与服务程序则未必是可互操作的。

（2）不同厂商 ORB 产品之间的可互操作性：CORBA 2.0 版引入了GIOP 和 IIOP，从而实现了不同供应商的 ORB 产品之间的可互操作性，所有供应商的 ORB 产品如果与 CORBA 2.0 兼容则彼此之间可互操作。

（3）不同体系结构之间的可互操作性：更完善的可互操作性还应包括不同体系结构之间的可互操作， 例如一个CORBA对象可通过协议桥接操作一个DCOM对象， OMG通过引入ESIOP来解决这一问题。 但ESIOP只能解决CORBA与特定体系结构 （如
DCOM）之间的互操作，并不能通过一套 ESIOP解决所有的问题。

CORBA开发过程

（1）编写分布式对象的接口，利用OMG的IDL编写对象的规格说明，放到一个文本文件中称为IDL文件。

（2）编译IDL文件生成桩与框架，IDL编译器为IDL文件中定义的每一个接口自动生成7个.java文件。

（3）编写对象实现，CORBA应用程序的对象实现最常用、最简单的实现方式是使用继承

（4）编写服务程序，典型的服务

程序通常执行以下步骤：

① 初始化对象请求代理（ORB） 。

② 用所需策略创建一个可移植对象适配器（POA） 。程序中的BankPOA是我们为 POA

起的名字，客户程序必须使用相同的 POA名字。

③ 创建一个提供服务的伺服对象。伺服对象是服务端的本地对象，当伺服对象通过对

象适配器注册到 ORB 后，就成为一个可供远程调用的 CORBA对象。

④ 激活新创建的伺服对象，即利用 POA 将伺服对象以一个字符串表示的标识注册到

ORB 上。

⑤ 激活 POA管理器

⑥ 等待客户程序发来请求。

（5）. 编写客户程序

① 初始化 ORB。

② 绑定到一个对象。

③ 通过调用对象上的方法

（6）编译应用程序

（7）.运行应用程序

（8）.互操作尝试

设计POA策略

![POA管理器的状态转换](http://p3.pstatp.com/large/pgc-image/0de71988251841d4a98cbcb5e443a4c0)

这里为大家准备了Java学习路线分享给大家，工作中学习，闲暇时间也不要忘记充电。

直接上图，这里分为六大块：

架构师筑基：基础要牢固

![并发技术](http://p1.pstatp.com/large/pgc-image/69524cf4d0594ce8b9a77bc015a33ebe)

开源框架解析：源码阅读

![框架源码](http://p9.pstatp.com/large/pgc-image/663e24093f9b4a2cb53f996134743f82)

高性能架构：性能优化

![性能优化](http://p1.pstatp.com/large/pgc-image/ac093da5843742528e800ef0bbf8c460)

微服务：必不可少

![微服务](http://p1.pstatp.com/large/pgc-image/ed2720a627a64a07acb2ffc48d4dfc36)

B2C商城：实战经验

![电商实战](http://p3.pstatp.com/large/pgc-image/bc745ee77e0e41fcb2ea31356e47ac4c)

高清大图和相关视频资料获取方式

![资料获取](http://p1.pstatp.com/large/pgc-image/5399a16ac35f4db4b6fbcac345c8c4bc)

# 什么是中间件？

![黑客帝国](http://p1.pstatp.com/large/5e7000024cb93f517bb9)



## 1 什么叫做中间件

中间件（英语：Middleware）是**提供系统软件和应用软件之间连接的软件**，以便于**软件各部件之间的沟通**，特别是应用软件对于系统软件的集中的逻辑，是一种独立的系统软件或服务程序，分布式应用软件借助这种软件在不同的技术之间共享资源。

也就是说，关于中间件，我们可以理解为：是一类能够为一种或多种应用程序合作互通、资源共享，同时还能够为该应用程序提供相关的服务的软件。（注意：中间件是一类软件的总称，不是单独的一个软件）

![中间件漫画注解](http://p1.pstatp.com/large/5b5c0003e8cb96046315)

## 2 常见的中间件服务器有哪些

我们经常管中间件叫做中间件服务器，也会叫作应用服务器。正常情况下一次web的访问顺序是：web浏览器---web服务器（W3的那个，非广义）---web容器---应用服务器---数据库服务器。

一般本地开发经常使用的应用服务器就是tomcat，linux系统经常使用的是jetty或apache hpptd，大型的项目一般就用的JBOSS或webloigc

小项目，或者是个人开发tomcat 大项目或者商业项目一般采用：weblgoic/webshere其他的还有jboss、glasshfish等，一些示例项目或者小项目常采用jetty

- Tomcat：是Sun的JSWDK(JavaServer Web Development Kit)中Servlet的运行环境(servlet容器)。Tomcat是Apache Jakarta软件组织的一个子项目，Tomcat是一个JSP/Servlet容器，它是在SUN公司的JSWDK（Java Server Web Development Kit）基础上发展起来的一个JSP和Servlet规范的标准实现，使用Tomcat可以体验JSP和Servlet的最新规范。经过多年的发展，Tomcat不仅是JSP和Servlet规范的标准实现，而且具备了很多商业Java Servlet容器的特性，并被一些企业用于商业用途。

- JBoss：是一个运行EJB的J2EE应用服务器。它是开放源代码的项目，遵循最新的J2EE规范。从JBoss项目开始至今，它已经从一个EJB容器发展成为一个基于的J2EE的一个web 操作系统（operating system for web），它体现了J2EE规范中最新的技术

- WebLogic服务器：是企业级的应用服务器，支持EJB, 集群以及 ERP（企业资源计划）的连通性 ，开发公司：BEA。

- WebSphere：此产品系列是IBM公司一套典型的电子商务应用开发工具及运行环境
