# 混合云理解

初衷：混合云XX，提升IT效率，使能业务转型。

混合云是个系统工程，包含硬件，软件，从服务器，存储，网络，到上层高级服务，含大数据，容器，AI等等，是一个全栈的工程，各个部分能力要提供，还要相互协同，衍生了消息服务，缓存服务，数据库服务等等，同时混合云在5G的发展下，要支持中心数据中心，边缘数据中心，同时支持AI的灵活部署。由此衍生的全栈“混合云+边缘+AI”解决方案，匹配运营商5G业务发展诉求；构建中心云+公有云+边缘云的统一架构，实现智能的云边协同，线下线上协同的云联邦（真正实现统一的身份整整服务），支持全场景，全栈EI和一站式应用平台，支持运营商对内IT应用现代化提升IT效率，对外加速2C/2B业务创新向数字化业务使能者转型；


## 混合云支持运营商多场景

1. 运营商传统电信业务场景：
CT CNF是运营商核心业务注入vIMS，vEPC等等，，要求实现低时延，高性能，需要电信云（NFVI）建设，

2. 运营商IT BSS/OSS/MSS场景，数据敏感，集成复杂；三域包含了核心应用及非核心应用，涉及内部uIT云，2C/2B业务云。

3. 2C/2B创新业务，要求资源弹性，快速迭代，快速试错，诸如移动支付（Mobile Payment），AR/VR，视频（Video）， 游戏（Game），IoT等等创新业务，公有云是这些业务的立项选择。

为支持上述业务的发展，电信云（NFVI），私有云，公有云是同时存在和协调发展的，同时更贴近客户业务的边缘云，边缘节点处理大量实施请求；边缘云，私有云使能2C/2B业务，中心云，电信云建设使能运营商ICT转型，公有云使能业务快速创新，完成生态快速汇聚，发展；支持各类垂直行业的业务快速部署，快速迭代，包含游戏，制造，交通，金融，政府，公共安全，医疗，能源，教育等等。

## 怎么建设？我们的建议
解决下面的问题：
- 从烟囱式IT系统到自治的云化基础设施，实现IT效率提升和TCO降低
- 从封闭的基础设施管理转变为混合云，兼顾业务开发和合规性
- 从瀑布式开发模式到敏捷迭代，缩短应用上线时间，从月到天；
- 从有限的产品组合到公有云开放的生态，提供更丰富服务能力产品，实现创收，改善ROI

## 混合云解决方案的核心价值

线上线下协同，云边协同

DC云化转型，云原生业务专心，使能2B/2C创新；

关键能力：
- 线上线下协同，确保无缝云联邦
- 云边协同，设计镜像及自动化编排模型的快速同步与推送，应用在中心一次编排实现云边快速部署；云端集中管理，本地自治与本地运维结合
- 全场景AI，分层API预集成，支持短边云独立的协同的统一训练和推理框架
- 一站式云原生应用平台，企业级Paas平台能力，以应用为中心，提供微服务，Web， 移动和函数应用全栈解决方案。
- 帮助企业加速业务创新，多元异构管理，支持集成VMWAre， HyperV，Power VM保护已有投资，支持AWS和Azure形成混合云。
- 端到端的专业服务以及智能运维工具CloudOps，提供DC云化，应用上云的评估，规划，云平台集成，应用迁移方案设计和支持，云平台运维和优化系统化服务和CloudOps工具链支撑客户真正转型成功；


## 附加阅读
1. ROI 投资收益分析

什么是ROI，一般的，投资收益分析（ROI，return on investment)是客户在进行网络建设，数据中心投资建设，集采等规划过程中很重要的一个环节。

拿运营商举例，其投资规划的基本流程
1. 外部环境分析，内部能力分析
2. 制定发展战略计划
3. 制定业务规划
4. 制定网络规划
5. 实施计划；

其中，2,3,4阶段通常运营商就要完成ROI分析。

ROI月TCO，TVO的异同

1. TCO，关注综合拥有成本，包含OPEX（运行成本，维护成本），CAPEX（购买成本，部署成本）

2. ROI，关注投资回报，包括收入，OPEX（运行成本，维护成本，市场成本，互联互通，管理等等），CAPEX（购买成本，部署成本）。 重载分析评价一个投资决策项目是否值得投资，即投资回报问题。

3. TVO，关注总体拥有价值，包含以上的收入成本，还要考虑市场机会及风险。

TCO、TVO分析偏重于不同的解决方案为运营商带来的成本节省或收益（以及机会增加，风险降低等）增加的比较。

ROI分析的呈现指标

包含输入： revenue， capex，opex

包含输出：
- RCF = Revenue-CAPEX-OPEX
- EBITDA = Revenue- OPEX
- NPV RCF在扣除资金成本后的值，大于0表示值得投资<br>
Excel 表计算方法：   =NPV(WACC, -首期投资：第N年净收入)

- IRR，投资后期望达到的报酬比例，如果IRR>WACC，表示投资报酬率高于资金成本，该项目值得投资；<br>
Excel 表计算方法：   =IRR(-首期投资：第N年净收入)

- Payback period：NPV转正年限
- WACC =(债务/总资本）\*债务成本\*（1-企业所得税税率）+（资产净值/总资本）∗股权成本


自由现金流量＝（税后净营业利润＋折旧及摊销）－（资本支出＋营运资本增加）

自由现金流量 ＝ 税后净营业利润－营运资本净增加－资本净支出

自由现金流量＝ （主营业务收入–主营业务成本–营业税金及附加–管理费用–营业费用＋经营租赁内含利息） ×（1 － 所得税率）＋ 递延税款的增加－（货币资金＋应收票据＋应收账款＋其他应收款＋预付账款＋存货＋待摊费用）＋（应付票据＋应付帐款＋预收帐款＋应付工资＋应付福利费＋应交税金＋其他应付款＋预提费用）＋（计提的坏账准备＋计提的存货跌价准备＋待摊费用摊销＋提取的预提费用）－ （固定资产的本期增加数＋在建工程的本期增加数－在建工程转入固定资产数＋增加的合并价差＋无形资产本期增加数＋长期待摊费用本期增加数）＋（折旧＋无形资产及长期待摊费用的摊销）

ROI的分析流程
1. 关键参数的指定（计划？投资周期？范围
2. 用户预测（业务及用户数，业务可以尽量细分）
3. CAPEX细分（网络，服务，设备等等）
4. OPEX细分（运维费用，市场及销售，客户关心，员工，通用及行政管理）
5. 资费设计或者ARPU用于计算收入
6. 输出关键财务指标，包含营收分析，EBITDA，EBITDA Margin，自有现金流，NPV，IRR, CAPEX细分，OPEX细分等

关键术语
- NPV： net present value
- IRR： Internal rate of return
- WACC: Weighted Average cost of Capital
- CAPEX: Capital Expenditure
- OPEX:Operation Expenditure
- TCO: Total Cost of Ownership = （CAPEX + OPEX）
- FCF: Cash flow available for distribution among all the security holders of a company
- EBITDA: Earning before interest, taxes, Depreciatin and Amortization.

1. EBITDA：    EBITDA=Revenue-OPEX<br>
税息折旧及摊销前利润，简称EBITDA，是Earnings Before Interest, Taxes, Depreciation and Amortization的缩写，即未计利息、税项、折旧及摊销前的利润。 EBITDA被私人资本公司广泛使用，用以计算公司经营业绩
2. EBITDA Margin:      EBITDA margin =EBITDA/Revenue<br>
反映企业盈利情况，如果该数值很低表示企业OPEX过高。

3. FCF：    FCF≈Revenue -TCO <br>
自由现金流（Free Cash Flow)是指扣除新增资本投资后公司核心经营活动产生的现金流，是一项理论上更准确的业绩和公司财务状况衡量指标，反映公司在会计年度或季度内支付所有现金成本和费用后剩余的现金。<br>
如果累计的FCF在设定年限内转正，即粗略的表现该项目值得投资，如要要更精确一些就要考虑NPV了。NPV其实就是考虑了折现率的FCF。

NPV 净现值（ Net Present Value）-１

NPV定义：
净现值是指考虑了未来资金成本的现金流，比如资金成本10%，100元现金流一年后的净现值就只有90元。净现值法就是按净现值大小来评价方案优劣的一种方法。净现值大于零则方案可行，且净现值越大，方案越优，投资效益越好。

计算方法：  净现值=未来报酬的总现值－初始投资。

NPV公式从网上找一个

举例1：如何选择项目？
假设A项目投资10000, 未来现金流是15000和B项目投资1000未来现金流是1800，WACC（资金成本）为10%那么：

```
A项目NPV：15000/（1+10%）-10000=3636.36
B项目NPV：1800/（1+10%）-1000=636.36                        
````
（应该选择A项目）

举例2：如何计算5年NPV

| | 2016 | 2017 | 2018 | 2019 |  2020 | 
| --- | --- | --- | --- | --- | --- | 
| 投入 | 800 | 500 | - | - | - | 
| 成本 | - | 100 | 1500 | 1200 | 1000 | 
| 收入 | - | - | 2000 | 1800 | 1900 | 

设定折现率（基准收益率），即公式中的i 为8%<br>
2016年，净现值=(0-800)/(1+0.08) = -740.74<br>
2017年，净现值=(0-600)/(1+0.08)^2 = -514.40<br>
2018年，净现值= (2000-1500)/(1+0.08)^3 = 396.92<br>
2019年，净现值=(1800-1200)/(1+0.08)^4 = 441.02<br>
2020年，净现值=(1900-1000)/(1+0.08)^5 = 612.52<br>
<br>
最终五年的NPV= -740.74 -514.40+396.92+441.02+612.52=195.32 （方案可行）

当净现值为零时，说明方案的投资报酬刚好达到所要求的投资报酬。所以，净现值的经济实质是投资方案报酬超过基本报酬后的剩余收益。

IRR 内部收益率（ Internal Rate of Return）

IRR定义：

是一项投资渴望达到的报酬率。内部收益率越高，说明你投入的成本相对少，但获得的收益却相对多。

也可以说明项目投资收益能承受的货币贬值、通货膨胀或抗风险能力,比如内部收益率10%，表示该项目操作过程中每年能承受货币最大贬值10%，或通货膨胀10%。

计算方法(excel)：

最简单的计算方式是利用excel表格，在任意单元格输入公式“=IRR(-A,a1,a2,a3,…an)”就能计算一系列现金流的的IRR，第一个一般为负数表述投资流出现金，以后每年正数表示净收回（净流入），负数表示净投出（净流出），但是一定要注意每个数的间隔为1年，如某年无现金流入和流出，应该输入0。

举例：如何计算和比较IRR ？

你现在存入银行1000，分以下情况：

方案1：以后每年取出利息100元，3年后取本金和利息1100，则IRR=IRR(-1000,100,100,1100) =10.00%    

（内部收益率更高）

方案2：3年后取出本金和利息1300，则IRR=IRR(-1000,0,0,1300) =9.14% 


折现率Discount rate

折现率定义：

通俗地讲，就是“未来的钱折到现在值多少钱，折现率用来算NPV”。

以资金本金的百分数计的资金每年的盈利能力，也指1年后到期的资金折算为现值时所损失的数值，以百分数计。

   
 
折现率计算：网上找一下共识

（PV = 现值（present value），C=期末金额，r=折现率，t=投资期数）在进行折现时，折现率一般采用当前的市场利率，如同样期限的贷款利率等；或用资金的实际成本作为折现率。

举例：如何利用折现率算现值？
一年后一块钱在今天的价值=一年后的一块钱/（1+折现率）<br> 二年后一块钱在今天的价值=二年后的一块钱/（1+折现率）^2（注：平方）<br>
三年后一块钱在今天的价值=三年后的一块钱/（1+折现率）^3（注：立方）

再举一个复利的例子：

现在有100元，要想使其两年后变为121元，那年报酬率应为10%，即：<br>
100×（1+10%）^2

那么这个10%就是将121元，按两年期折算为100元的折现率。

WACC（ Weighted Average Cost of Capital ）加权平均资本成本


WACC定义：

WACC反映了一个公司通过股权和债务融资的平均成本，项目融资的收益率必须高于这个加权平均资本成本该项目才具有投资价值。

WACC除了被用来考查企业融资的成本之外，常被用来作为企业投资项目平价的折现率（discount rate）使用，而NPV需要使用到折现率。一个项目WACC = 各种资金来源 discount rate A/B/C   的加权。

WACC计算：计算公式=（债务/总资本）\*债务成本*（1-企业所得税税率）+（资产净值/总资本）\*股权成本，考虑税收时，债务成本=利息*（1-税率）


举例：如何计算WACC ?

某企业共有资金100万元，其中债券(Wb)30万元，优先股(Wp)10万元，普通股(Ws)40万元，留存收益(We)20万元，各种资金的成本分别为：6％、12％、15.5％和15％。试计算该企业加权平均资金成本。

1、计算各种资金所占的比重Wb＝30÷100×100％＝30％ Wp＝10÷100×100％＝10％ Ws＝40÷100×100％＝40％ We＝20÷100×100％＝20％ 

2、计算加权平均资本成本Kw＝30%×6%＋10%×12%＋40%×15.5%＋20%×15%＝12.2％

当NPV>0 (或者 IRR>WACC) 时，表示项目值得投资

ROI分析最后的判断指标包括NPV和IRR等，如果NPV>0或IRR>WACC（这两个指标的结果在同一个项目中一般是一致的），说明项目是值得投资的，NPV的数值就是项目的净现值。

