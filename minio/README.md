#  认识minio
![Logo](/images/logo.svg)
官方主打： 高性能的对象存储（High Perforamnce Object Storage）
- 100%开源
- 企业级（Enterprise-Grade）
- 兼容s3

主打场景：<br>
为机器学习，分析和应用数据负载提供高性能的数据基础设施

主要亮点
- SQL select<br>
诸如Spark，Presto，Hive和Flink之类的数据处理平台可以使用SQL选择查询来分析数据，而无需下载整个对象。 它支持Parquet，JSON和CSV格式，以及压缩和加密的对象。
- Encryption & WORM<br>
MinIO通过以可忽略的性能开销加密数据来提供机密性，完整性和真实性保证。
- Multi-Site Federation<br>
联邦把无限数量的MinIO实例结合，形成统一的全局名称空间。
- Lambda Compute<br>
MinIO Server通过其兼容AWS SNS / SQS的事件通知服务触发Lambda功能。 支持的目标包括消息队列（例如，Kafka，NATS，AMQP，MQTT，Webhooks）和数据库（例如，Elasticsearch，Redis，Postgres和MySQL）。
- Identity & Access Management<br>
MinIO Server与身份认证服务WSO2，Keycloak，Okta，Ping身份，Active Directory等集成在一起，以对应用程序和用户进行身份验证。
- Erasure Code & Bitrot Protection<br>
MinIO的高级能力纠删码（Erasure Code）和Bitrot Proection ，意味着客户可以在丢失多达一半的服务器和一半的驱动器，并继续提供数据。 使用x64和ARM CPU上的SIMD指令可加速数据保护代码。

**Minio全球生态**

MinIO生产部署涵盖了全球。 作为业界最受关注和下载量最高的对象存储服务器，它的影响力每天都在增长-由大量的贡献者和传播者社区提供支持。
![minio生态](/images/minio-ecosystems.PNG)

## 关键词

### 1. 新一代列式存储格式Parquet
Apache Parquet是Hadoop生态圈中一种新型列式存储格式，它可以兼容Hadoop生态圈中大多数计算框架(Hadoop、Spark等)，被多种查询引擎支持（Hive、Impala、Drill等），并且它是语言和平台无关的。Parquet最初是由Twitter和Cloudera(由于Impala的缘故)合作开发完成并开源，2015年5月从Apache的孵化器里毕业成为Apache顶级项目，最新的版本是1.8.1。
#### 1.1 Parquet是什么
Parquet的灵感来自于2010年Google发表的Dremel论文，文中介绍了一种支持嵌套结构的存储格式，并且使用了列式存储的方式提升查询性能，在Dremel论文中还介绍了Google如何使用这种存储格式实现并行查询的，如果对此感兴趣可以参考论文和开源实现Apache Drill。
#### 1.2 嵌套数据模型
在接触大数据之前，我们简单的将数据划分为 **结构化数据和非结构化数据**，通常我们使用关系数据库存储结构化数据，而关系数据库中使用数据模型都是扁平式的，遇到诸如List、Map和自定义Struct的时候就需要用户在应用层解析。但是在大数据环境下，通常数据的来源是服务端的埋点数据，很可能需要把程序中的某些对象内容作为输出的一部分，而每一个对象都可能是嵌套的，所以如果能够原生的支持这种数据，这样在查询的时候就不需要额外的解析便能获得想要的结果。例如在Twitter，在他们的生产环境中一个典型的日志对象（一条记录）有87个字段，其中嵌套了7层，如下图:
![嵌套数据结构](/images/parquet.PNG)

另外，随着嵌套格式的数据的需求日益增加，目前Hadoop生态圈中主流的查询引擎都支持更丰富的数据类型，例如Hive、SparkSQL、Impala等都原生的支持诸如struct、map、array这样的复杂数据类型，这样也就使得诸如Parquet这种原生支持嵌套数据类型的存储格式也变得至关重要，性能也会更好。

#### 1。4 列式存储
列式存储，顾名思义就是按照列进行存储数据，把某一列的数据连续的存储，每一行中的不同列的值离散分布。列式存储技术并不新鲜，在关系数据库中都已经在使用，尤其是在针对OLAP场景下的数据存储，由于OLAP场景下的数据大部分情况下都是批量导入，基本上不需要支持单条记录的增删改操作，而查询的时候大多数都是只使用部分列进行过滤、聚合，对少数列进行计算（基本不需要select * from xx之类的查询）。列式存储可以大大提升这类查询的性能，较之于行是存储，列式存储能够带来这些优化：
- 由于每一列中的数据类型相同，所以可以针对不同类型的列使用不同的编码和压缩方式，这样可以大大降低数据存储空间。
- 读取数据的时候可以把映射(Project)下推，只需要读取需要的列，这样可以大大减少每次查询的I/O数据量，更甚至可以支持谓词下推，跳过不满足条件的列。
- 由于每一列的数据类型相同，可以使用更加适合CPU pipeline的编码方式，减小CPU的缓存失效。

[原文链接](https://blog.csdn.net/yu616568/article/details/50993491)

### 2. AWS Lambda
AWS Lambda是亚马逊云计算服务的一部分，它是一个事件驱动、无服务器的平台。它提供计算服务，运行事件响应代码，并自动管理计算资源。它最初发布于2014年11月.

AWS Lambda 是一项无服务器计算服务，可运行代码来响应事件并为您自动管理底层计算资源。您可以使用 AWS Lambda 通过自定义逻辑来扩展其他 AWS 服务，或创建您自己的按 AWS 规模、性能和安全性运行的后端服务。AWS Lambda 可以自动运行代码来响应多个事件，例如，通过 Amazon API Gateway 发送的 HTTP 请求、Amazon S3 存储桶中的对象修改、Amazon DynamoDB 中的表更新以及 AWS Step Functions 中的状态转换。

Lambda 在可用性高的计算基础设施上运行您的代码，执行计算资源的所有管理工作，其中包括服务器和操作系统维护、容量预配置和自动扩展、代码和安全补丁部署以及代码监控和记录。您只需要提供代码。

#### 2.1 介绍 AWS Lambda 的函数
您在 AWS Lambda 上运行的代码被称为“Lambda 函数”。 当您创建 Lambda 函数之后，只要一触发该函数，它就能始终立即运行起来，这与电子表格中的公式类似。每个函数中都包含您的代码以及一些相关的配置信息，包括函数名称和资源要求。Lambda 函数是“无状态的”，与底层基础设施没有密切关系，从而使 Lambda 能在需要时尽可能多地快速启动函数副本，以扩展到传入事件的速率。

当您将代码上传到 AWS Lambda 之后，您可以将您的函数与特定的 AWS 资源（例如特定的 Amazon S3 存储桶、Amazon DynamoDB 表、Amazon Kinesis 流或 Amazon SNS 通知）关联起来。然后，当资源发生改变时，Lambda 将视需要执行您的函数并管理计算资源，从而与传入请求保持联系。

[官方链接](https://aws.amazon.com/cn/lambda/features/)

### 3. 腾讯之码客
#### 3.1 腾讯技术交流社区现状：
开发和运营团队：属于TEG下面的开发团队，共18人腾讯自有人力，少量外包（2-3人）负责礼品和活动管理。产品面向2万研发，大部分都是自有人力。

**产品名称/品牌：** 码客 ma.oa.com，嵌入其他官网<br>
**产品发展现状：**<br>
- 2019.1：问答上线
- 2019.4：圈子1.0、移动端
- 2019.7：首页、开源广场
- 2019.9：圈子2.0，码力值
- 2019.10：机器人，搜索<br>
**运营数据和目标：**
年度目标PV（页面浏览）100W，截止2019年11月PV 30W，离目标还有一定的距离。
日活2000，月活2w多人，累计4w余人（基本全覆盖）
![腾讯码客](/images/tencent-make.jpg)
主要特色：
- 从Svn版本管理开始，由工具向社区转换
- 采用实名提问（后续会加入昵称——半匿名方式）
- 打造硬核的开发者社区形象
  - 对内：采用码力值排行榜、技术名片会纳入个人提交代码的贡献
  - 对外：把员工在开源社区的贡献也统计进来
- 绑定企业微信
  - 用户反馈通知
  - 圈内消息推送
  - 私人技术助手
- 工蜂&码客
  - 工蜂<br>
    代码数据<br>
    开源项目<br>
    功能运营<br>
- 码客<br>
    开源广场<br>
    技术名片<br>
    吉祥物：马克，吐温 设计吉祥物<br>
![腾讯码客](/images/tencent-make1.jpg)
运营策略
- 内容包括：每日精选、日常专题、日常话题、大V助阵：解达问题、洞见：高端对话，脑洞大开、出题
- 标签管理：前期自由创建，目的是更多的收集全，后期就只能进行选择。
- 用户：码客体验官群、大V、暗桩：线人，托、码客客服号
- 活动：算法类题目引入到内部解答、情人节（三行代码写情书）、1024程序员节、圣诞节（抽奖代码公开）

#### 3.2 分析
**看腾讯：强设计、强运营。**<br>
- 技术交流社区（码客）非常重视产品设计和运营，有专门的设计团队，帮助设计页面、吉祥物和系列宣传，而且运营人员主体都是自由人力（我们大多数都是外包）
技术交流社区有整体性（包括各个问答和圈子是整体规划的），而且看上去很有温度。
- 运营推广初期，由公司高层开始推动。后期的推广主要是靠线上，线下活动比较少。规划的运营活动都很接地气，值得我们借鉴。
- 发展近一年后，同样进入了一个瓶颈期，PV基本在300W，提升也有一定的困难。

**看自己：**<br>总体上，我们在价值呈现、内容运营上比较强；但是活动运营、页面设计、整体规划比较弱。
- 我们的“技术问答”社区，给他们展示后，他们第一反应是整体页面有点“冷”。
- 我们的运营比较看重运营数据，我们有自己的运营报表，腾讯的数据需要IT统计，无法做到可视化。
- 我们在运营过程中，会关注标签质量、会关注提问和回答质量、会帮忙转发问题求解答、会联系提问者及时采纳问题。

### 4 Erasure Code - EC纠删码原理
#### 4.1 什么是Erasure Code
Erasure Code（EC），即纠删码，是一种前向错误纠正技术（Forward Error Correction，FEC），主要应用在网络传输中避免包的丢失， 存储系统利用它来提高存储可靠性。相比多副本复制而言， 纠删码能够以更小的数据冗余度获得更高数据可靠性， 但编码方式较复杂，需要大量计算 。纠删码只能容忍数据丢失，无法容忍数据篡改，纠删码正是得名与此。

EC的定义：Erasure Code是一种编码技术，它可以将n份原始数据，增加m份数据，并能通过n+m份中的任意n份数据，还原为原始数据。即如果有任意小于等于m份的数据失效，仍然能通过剩下的数据还原出来。

目前，纠删码技术在分布式存储 系统中的应用主要有三类，阵列纠删码（Array Code: RAID5、RAID6等）、RS(Reed-Solomon)里德-所罗门类纠删码和LDPC(LowDensity Parity Check Code)低密度奇偶校验纠删码。

RAID是EC的特殊情况。在传统的RAID中，仅支持有限的磁盘失效，RAID5只支持一个盘失效，RAID6支持两个盘失效，而EC支持多个盘失效。

EC主要运用于存储和数字编码领域。例如磁盘阵列存储（RAID 5、RAID 6），云存储（RS）等。

LDPC码也可以提供很好的保障可靠性的冗余机制。与RS编码相比，LDPC编码效率要略低，但编码和解码性能要优于RS码以及其他的纠删码，主要得益于编解码采用的相对较少并且简单的异或操作。LDPC码目前主要用于通信、视频和音频编码等领域。

### 5. Bit-rot Protection / Copy-on-write
研究存储必要的需要弄明白的概念，留待后续挖掘。
